{% import 'macros/accordion.html' as accordion -%}
{% import 'macros/markup_helpers.html' as markup_helpers -%}

{% set groups = [
        { 
            'name': 'basic',
            'heading': _('Basic'),
            'fields': ['title', 'url', 'notes', 'baz']
        },
        { 
            'name': 'categorization',
            'heading': _('Categorization'),
            'fields': ['tags', 'thematic_category'],
        },
        { 
            'name': 'contact',
            'heading': _('Contact'),
            'fields': ['contact_info', 'contacts'],
        },
        { 
            'name': 'details',
            'heading': _('Details'),
            'fields': ['temporal_extent', 'reviewed', 'created', 'published', 
                'wakeup_time', 'rating', 'grade'],
        },
   ]
%}

<div class="{{ " " ~ classes | join(' ') }}">
    <h3>{{ title }}</h3>
    
    {{ markup_helpers.error_messages(errors[errors.global_key]) }} 

    {% call(group_desc) accordion.accordion('foo-fields', groups) %}
        {% for field_name in group_desc.fields -%}
        {% with f = fields[field_name] -%}
        {{ f.markup }}
        <hr/>
        {% endwith -%}
        {% endfor -%}
    {% endcall %}
</div>
