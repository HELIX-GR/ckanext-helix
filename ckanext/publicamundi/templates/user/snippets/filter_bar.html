{% set sorting_status_list =[
    {'display_name': 'Publish Failed', 'get_param': 'publish-failed'},
    {'display_name': 'Published', 'get_param': 'published'},
    {'display_name': 'Identified', 'get_param': 'identified'},
    {'display_name': 'Identify Failed', 'get_param': 'identify-failed'},
    {'display_name': 'Rejected', 'get_param': 'rejected'},
    ] %}

{% set sorting_storer_type_list =[
    {'display_name': 'Vector', 'get_param': 'vector'},
    {'display_name': 'Raster', 'get_param': 'raster'},
    ] %}

  <div id="storer_type_filter" class="btn-group">
  <a class="btn btn-small dropdown-toggle" data-toggle="dropdown" href="#">
    <i class="icon-filter"></i>
      Type
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
      {% for sorting_storer_type in sorting_storer_type_list%}
         <li>
           <a  href="{{h.add_get_param(request.url, 'storer_type',sorting_storer_type['get_param'] )}}">
             {{ sorting_storer_type['display_name'] }}
           </a>
         </li>
       {% endfor %}
    </ul>
  </div>

   <div id="status_filter" class="btn-group">
  <a class="btn btn-small dropdown-toggle" data-toggle="dropdown" href="#">
    <i class="icon-filter"></i>
      Status
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
      {% for sorting_status in sorting_status_list%}
        <li>
            <a href="{{h.add_get_param(request.url, 'status',sorting_status['get_param'] )}}">
            <span class="label" data-resource-status="{{sorting_status['get_param']}}">&nbsp;&nbsp;&nbsp;</span>
            {{ sorting_status['display_name'] }}
            </a>
        </li>
       {% endfor %}
    </ul>
   </div>

{% if request.GET|length>1 %}
  <span class="filtered pill" style="float:right;">
     Clear All
    <a href="{{h.url_for(request.path) }}" class="remove" title="Remove">
    <i class="icon-remove"></i>
    </a>
  </span>
{% endif %}

{% for key,value in request.GET.iteritems() %}
  {% if key in ['storer_type','status'] %}
    <span class="filtered pill" style="float:right;">
      {% if key == 'storer_type' %}
        {% for sorting_storer_type in sorting_storer_type_list%}
          {% if sorting_storer_type['get_param']==value %}
            {{sorting_storer_type['display_name']}}
          {% endif %}
        {% endfor %}
      {% elif key == 'status' %}
        {% for sorting_status in sorting_status_list%}
          {% if sorting_status['get_param']==value %}
            {{sorting_status['display_name']}}
          {% endif %}
        {% endfor %}
      {% endif%}
      <a href="{{h.remove_get_param(request.url,key,value) }}" class="remove" title="Remove">
        <i class="icon-remove"></i>
      </a>
    </span>    
  {% endif %} 
{% endfor %}
